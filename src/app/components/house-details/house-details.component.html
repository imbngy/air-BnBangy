<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
</head>
<div class="details-section">
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous"
        src="https://connect.facebook.net/it_IT/sdk.js#xfbml=1&version=v18.0&appId=6075187465914540"
        nonce="oAORJxE7"></script>
    <div *ngFor="let house of houses" class="container-fluid">

        <div class="row">
            <div class="col-md">



            </div>
            <div class="col-md-auto">

                <p routerLink="/houses" class="mt-3"><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg"
                        fill="gray" width="30" viewBox="0 0 16 16">
                        <path d="M11.62 3.81 7.43 8l4.19 4.19-1.53 1.52L4.38 8l5.71-5.71 1.53 1.52z" />
                    </svg> Torna agli annunci
                </p>
                <app-immagini-list></app-immagini-list>

                <h3 class="mb-3">{{ house.nome }}</h3>
                <div *ngIf="house.inAsta">
                    <h4>Prezzo Iniziale:</h4> {{ asta.prezzoIniziale | currency:'EUR' }}
                    <h4>Prezzo Attuale:</h4> {{ asta.prezzoAttuale | currency:'EUR' }}
                </div>
                <div class="price mb-3" *ngIf="!house.inAsta && house.prezzoIniziale == house.prezzoAttuale">
                    <h4>Prezzo:</h4> {{ house.prezzoIniziale | currency:'EUR' }}
                </div>
                <div class="price mb-3" *ngIf="!house.inAsta && house.prezzoIniziale != house.prezzoAttuale">
                    <h4>Prezzo:</h4>
                    <del class="text-muted">{{ house.prezzoIniziale | currency:'EUR' }}</del>
                    {{ house.prezzoAttuale | currency:'EUR' }}
                </div>

                <div class="price mb-3" *ngIf="house.inAsta" [(ngModel)]="newOfferta">
                    <h4>Fai un'offerta:</h4> <input type="number" class="form-control" id="offerta" name="offerta"
                        placeholder="Inserisci la tua offerta" formControlName="prezzoAttuale" required>
                    <button type="button" class="btn btn-primary mt-3" (click)="updateAsta(newOfferta)">Invia</button>
                </div>

                <h4>Descrizione:</h4>
                <p class="mb-3">{{ house.descrizione }}</p>
                <p> <svg width="35" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128">
                        <path
                            d="M64 47.833a7.75 7.75 0 1 0 7.75 7.75 7.759 7.759 0 0 0-7.75-7.75zm0 12a4.25 4.25 0 1 1 4.25-4.25 4.255 4.255 0 0 1-4.25 4.25z" />
                        <path
                            d="M115 113.083h-5.083V58.917H115a1.75 1.75 0 0 0 1.6-2.463l-11-24.667a1.749 1.749 0 0 0-1.6-1.037H73.593l-5.862-5.923a5.353 5.353 0 0 0-7.462 0l-5.862 5.923h-5.942v-10.5h1.125a1.75 1.75 0 0 0 1.75-1.75v-5.333a1.75 1.75 0 0 0-1.75-1.75H28.41a1.75 1.75 0 0 0-1.75 1.75V18.5a1.75 1.75 0 0 0 1.75 1.75h1.125v10.5H24a1.749 1.749 0 0 0-1.6 1.037l-11 24.667a1.75 1.75 0 0 0 1.6 2.463h5.083v54.166H13a1.75 1.75 0 0 0 0 3.5h102a1.75 1.75 0 0 0 0-3.5zm-41.375 0h-19.25V87.75h19.25zm1.75-28.833h-22.75a1.75 1.75 0 0 0-1.75 1.75v27.083h-8.552v-55.2L64 35.983l21.677 21.9v55.2h-8.552V86a1.75 1.75 0 0 0-1.75-1.75zm-36.552 0h-9.906v-4.167h9.907zm62.01 3.5a1.75 1.75 0 0 0 1.75-1.75v-7.667a1.75 1.75 0 0 0-1.75-1.75H89.177v-15.16l1.855 1.877a5.232 5.232 0 0 0 8.914-4.38h6.47v54.166H89.177V87.75zm-11.657-3.5v-4.167h9.907v4.167zm13.687-50 9.437 21.167H98L77.057 34.25zm-46.491-.511 6.379-6.446a1.86 1.86 0 0 1 2.489 0L95.886 58.25a1.752 1.752 0 0 0 .187.2 1.736 1.736 0 0 1-.079 2.394 1.792 1.792 0 0 1-2.475-.014L65.244 32.265a1.8 1.8 0 0 0-2.487 0L34.481 60.834a1.746 1.746 0 0 1-1.236.52h-.01a1.742 1.742 0 0 1-1.309-2.9 1.744 1.744 0 0 0 .187-.2zM30.16 14.917h17.68v1.833H30.16zm14.8 5.333v10.5H33.035v-10.5zM15.7 55.417l9.436-21.167h25.807L29.994 55.417zm5.887 3.5h6.47a5.221 5.221 0 0 0 5.181 5.937h.03a5.221 5.221 0 0 0 3.7-1.557l1.855-1.874v15.16H27.167a1.75 1.75 0 0 0-1.75 1.75V86a1.75 1.75 0 0 0 1.75 1.75h11.656v25.333h-17.24z" />
                    </svg>
                    {{house.metriQuadri}} mÂ²
                </p>
                <div id="leafletMap" class="immobileMap map-container" style="height: 300px;">
                </div>
                <a *ngIf="!checkIfUserIsOwner(house.idProprietario)" href="#" type="button" class="btn btn-light mt-3"> <fa-icon [icon]="faEnvelope"
                        style="font-size: 15px;"></fa-icon> Contatta il Venditore </a>
                <div>
                    <a *ngIf="checkIfUserIsOwner(house.idProprietario)" (click)="deleteHouse(house.id)"
                        class="btn btn-danger mt-3 mr-3">Elimina</a>
                    <div>
                        <label *ngIf="checkIfUserIsOwner(house.idProprietario)" for="lowerP" class="mt-3 mr-3">Abbassa
                            il
                            prezzo:</label>

                        <input *ngIf="checkIfUserIsOwner(house.idProprietario)" id="lowerP" class="form-control"
                            type="number" [(ngModel)]="lowerP">

                        <button *ngIf="checkIfUserIsOwner(house.idProprietario)" (click)="lowerPrice(house.id, lowerP)"
                            class="btn btn-warning mt-3 mr-3">Conferma</button>
                    </div>
                    <div *ngIf="checkIfUserIsOwner(house.idProprietario) && !house.inAsta" class="mt-3">
                        
                        <label  for="astaP mt-3 mr-3"> Metti in Asta:</label>
                        <input id="astaP" class="form-control"
                            type="number" [(ngModel)]="astaP" placeholder="Prezzo Iniziale Asta">
                        <button (click)="startAsta(house.id, astaP)"
                            class="btn btn-warning mt-3 mr-3">Avvia Asta</button>
                    </div>
                </div>
                <h5 class="mt-5"> <svg width="25" xmlns="http://www.w3.org/2000/svg" width="22.703" height="21.928">
                        <path
                            d="M1.056 21.928c0-6.531 5.661-9.034 10.018-9.375V18.1L22.7 9.044 11.073 0v4.836a10.5 10.5 0 0 0-7.344 3.352C-.618 12.946-.008 21 .076 21.928z" />
                    </svg>Condividi</h5>

                <p>

                    <button class="btn btn-light" mat-button (click)="shareTo('twitter')">
                        <fa-icon [icon]="faTwitter" style="font-size: 20px;"></fa-icon>
                    </button>
                    <button class="btn btn-light" mat-button (click)="shareTo('facebook')">
                        <fa-icon [icon]="faFacebook" style="font-size: 20px;"></fa-icon>
                    </button>
                    <button class="btn btn-light" mat-button (click)="shareTo('whatsapp')">
                        <fa-icon [icon]="faWhatsapp" style="font-size: 20px;"></fa-icon>
                    </button>
                    <button class="btn btn-light" mat-button (click)="shareTo('mail')">
                        <fa-icon [icon]="faEnvelope" style="font-size: 20px;"></fa-icon>
                    </button>
                    <button class="btn btn-light" mat-button (click)="shareTo('linkedin')">
                        <fa-icon [icon]="faLinkedin" style="font-size: 20px;"></fa-icon>
                    </button>
                    <button class="btn btn-light" mat-button (click)="shareTo('telegram')">
                        <fa-icon [icon]="faTelegram" style="font-size: 20px;"></fa-icon>
                    </button>
                    <button class="btn btn-light" mat-button (click)="shareTo('pinterest')">
                        <fa-icon [icon]="faPinterest" style="font-size: 20px;"></fa-icon>
                    </button>
                </p>
                <app-recensioni-create></app-recensioni-create>
                <app-recensioni-list></app-recensioni-list>

            </div>
            <div class="col-md">

            </div>
        </div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</div>